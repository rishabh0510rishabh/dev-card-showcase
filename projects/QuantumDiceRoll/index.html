<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Dice Roller | Quantum Probability Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .orbitron-font {
            font-family: 'Orbitron', sans-serif;
        }
        
        body {
            background: radial-gradient(circle at 0% 0%, #0c0c1d 0%, #050514 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Quantum field background effect */
        .quantum-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 40, 120, 0.15) 0%, transparent 20%),
                radial-gradient(circle at 80% 70%, rgba(120, 0, 200, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 40% 80%, rgba(0, 150, 200, 0.1) 0%, transparent 20%);
            z-index: -1;
        }
        
        /* Floating particles */
        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(100, 200, 255, 0.3);
            animation: float 20s infinite linear;
            z-index: -1;
        }
        
        @keyframes float {
            0% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
        }
        
        /* Glowing border effect */
        .glow-border {
            border: 1px solid rgba(100, 150, 255, 0.2);
            box-shadow: 
                0 0 20px rgba(0, 100, 255, 0.1),
                inset 0 0 20px rgba(0, 100, 255, 0.05);
        }
        
        /* Quantum dice styles */
        .quantum-dice {
            width: 120px;
            height: 120px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        
        .dice-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 900;
            font-size: 3rem;
            backface-visibility: hidden;
            overflow: hidden;
        }
        
        .dice-face::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
            border-radius: 16px;
        }
        
        .pip {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        /* Quantum entanglement connection */
        .entanglement-beam {
            position: absolute;
            height: 4px;
            background: linear-gradient(90deg, transparent, rgba(180, 100, 255, 0.8), transparent);
            border-radius: 2px;
            filter: blur(1px);
            z-index: -1;
            animation: beamPulse 3s infinite;
        }
        
        @keyframes beamPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        
        /* Quantum state indicator */
        .quantum-state {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            background: rgba(0, 10, 30, 0.6);
        }
        
        .quantum-state::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(100, 200, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        /* Animated gradient text */
        .gradient-text {
            background: linear-gradient(90deg, #00d4ff, #6a5af9, #d66efd);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            background-size: 200% auto;
            animation: gradientMove 3s ease infinite;
        }
        
        @keyframes gradientMove {
            0% { background-position: 0% center; }
            50% { background-position: 100% center; }
            100% { background-position: 0% center; }
        }
        
        /* Stats bars */
        .stat-bar {
            height: 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }
        
        .stat-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.8s ease;
        }
        
        /* Dice rolling animation */
        @keyframes rollDice {
            0% { transform: rotateX(0) rotateY(0) rotateZ(0); }
            25% { transform: rotateX(180deg) rotateY(90deg) rotateZ(45deg); }
            50% { transform: rotateX(360deg) rotateY(180deg) rotateZ(90deg); }
            75% { transform: rotateX(540deg) rotateY(270deg) rotateZ(135deg); }
            100% { transform: rotateX(720deg) rotateY(360deg) rotateZ(180deg); }
        }
        
        .rolling {
            animation: rollDice 1s ease-out;
        }
        
        /* Quantum collapse effect */
        @keyframes quantumCollapse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .collapse {
            animation: quantumCollapse 0.5s ease;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .quantum-dice {
                width: 90px;
                height: 90px;
            }
            
            .dice-face {
                font-size: 2.2rem;
            }
            
            .pip {
                width: 12px;
                height: 12px;
            }
        }
    </style>
</head>
<body class="text-white">
    <!-- Quantum field background -->
    <div class="quantum-field"></div>
    
    <!-- Floating particles -->
    <div id="particles-container"></div>
    
    <!-- Main container -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="text-center mb-12">
            <div class="flex items-center justify-center mb-4">
                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-cyan-500 to-purple-600 flex items-center justify-center mr-4">
                    <i class="fas fa-dice text-xl"></i>
                </div>
                <h1 class="orbitron-font text-5xl font-black gradient-text">QUANTUM DICE</h1>
            </div>
            <p class="text-gray-400 max-w-2xl mx-auto text-lg">
                Experience probability through the lens of quantum mechanics. Entangle dice, observe superposition collapse, and explore statistical anomalies.
            </p>
        </header>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Panel: Controls -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Dice Chamber -->
                <div class="glow-border rounded-2xl p-8 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="orbitron-font text-2xl font-bold">
                            <i class="fas fa-cube mr-3 text-cyan-400"></i>QUANTUM CHAMBER
                        </h2>
                        <div class="px-4 py-2 rounded-full bg-gray-900/80 border border-gray-700">
                            <span class="text-sm" id="chamber-status">Ready for observation</span>
                        </div>
                    </div>
                    
                    <!-- Dice Display Area -->
                    <div id="dice-chamber" class="relative flex flex-wrap justify-center items-center min-h-[320px] gap-10 p-6 rounded-xl bg-gray-900/40">
                        <!-- Dice will be dynamically inserted here -->
                        <div id="initial-state" class="text-center">
                            <div class="w-32 h-32 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center border border-gray-700">
                                <i class="fas fa-atom text-5xl text-gray-600"></i>
                            </div>
                            <p class="text-gray-500">Configure quantum parameters and roll dice</p>
                        </div>
                        
                        <!-- Entanglement beams will appear here -->
                        <div id="entanglement-beams"></div>
                    </div>
                    
                    <!-- Roll Results -->
                    <div id="roll-results" class="mt-8 p-6 rounded-xl bg-gray-900/60 border border-gray-700 hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-lg">
                                <i class="fas fa-wave-square mr-2 text-purple-400"></i>COLLAPSE RESULT
                            </h3>
                            <div class="flex items-center">
                                <span class="text-gray-400 mr-3">Sum:</span>
                                <span id="result-sum" class="text-3xl font-bold text-green-400">0</span>
                            </div>
                        </div>
                        <div id="result-values" class="flex flex-wrap gap-4">
                            <!-- Individual dice results will appear here -->
                        </div>
                    </div>
                </div>
                
                <!-- Quantum Controls -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Entanglement Control -->
                    <div class="glow-border rounded-2xl p-6 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm">
                        <h3 class="orbitron-font text-xl font-bold mb-6 flex items-center">
                            <i class="fas fa-link mr-3 text-purple-400"></i>ENTANGLEMENT
                        </h3>
                        
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Entanglement Level</span>
                                    <span id="entanglement-level" class="font-bold text-purple-400">0%</span>
                                </div>
                            <div class="stat-bar">
                                    <div id="entanglement-bar" class="stat-fill bg-gradient-to-r from-purple-600 to-purple-400" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <button id="entangle-btn" class="py-3 px-4 rounded-xl bg-gradient-to-r from-purple-700 to-purple-900 hover:from-purple-600 hover:to-purple-800 transition-all duration-300 flex items-center justify-center">
                                    <i class="fas fa-atom mr-2"></i>Entangle
                                </button>
                                <button id="separate-btn" class="py-3 px-4 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 transition-all duration-300 flex items-center justify-center">
                                    <i class="fas fa-times mr-2"></i>Separate
                                </button>
                            </div>
                            
                            <div class="text-sm text-gray-400 mt-4">
                                <i class="fas fa-info-circle mr-2 text-cyan-400"></i>
                                <span id="entanglement-description">Entangled dice exhibit correlated outcomes, defying classical probability.</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dice Configuration -->
                    <div class="glow-border rounded-2xl p-6 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm">
                        <h3 class="orbitron-font text-xl font-bold mb-6 flex items-center">
                            <i class="fas fa-sliders-h mr-3 text-cyan-400"></i>CONFIGURATION
                        </h3>
                        
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-gray-300">Number of Dice</span>
                                    <span id="dice-count-display" class="text-2xl font-bold">1</span>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button data-count="1" class="dice-count-selector active px-4 py-3 rounded-lg bg-gradient-to-r from-cyan-700 to-cyan-900">1</button>
                                    <button data-count="2" class="dice-count-selector px-4 py-3 rounded-lg bg-gray-800 hover:bg-gray-700">2</button>
                                    <button data-count="3" class="dice-count-selector px-4 py-3 rounded-lg bg-gray-800 hover:bg-gray-700">3</button>
                                    <button data-count="4" class="dice-count-selector px-4 py-3 rounded-lg bg-gray-800 hover:bg-gray-700">4</button>
                                </div>
                            </div>
                            
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Quantum Fluctuation</span>
                                    <span id="fluctuation-level" class="font-bold text-cyan-400">Medium</span>
                                </div>
                                <input type="range" id="fluctuation-slider" min="0" max="100" value="50" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Panel: Statistics & Info -->
            <div class="space-y-8">
                <!-- Quantum Roll Button -->
                <div class="glow-border rounded-2xl p-8 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm text-center">
                    <button id="quantum-roll-btn" class="w-full py-5 px-6 rounded-xl bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-[1.02] shadow-2xl">
                        <div class="flex flex-col items-center">
                            <div class="text-3xl mb-2">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="orbitron-font text-2xl font-bold">QUANTUM ROLL</div>
                            <div class="text-sm mt-1 opacity-80">Collapse the wave function</div>
                        </div>
                    </button>
                    
                    <div class="mt-6">
                        <button id="auto-experiment-btn" class="w-full py-3 px-4 rounded-xl bg-gradient-to-r from-amber-700 to-amber-900 hover:from-amber-600 hover:to-amber-800 transition-all duration-300">
                            <i class="fas fa-flask mr-2"></i>Run Quantum Experiment (100 rolls)
                        </button>
                    </div>
                </div>
                
                <!-- Quantum State -->
                <div class="glow-border rounded-2xl p-6 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm">
                    <h3 class="orbitron-font text-xl font-bold mb-6 flex items-center">
                        <i class="fas fa-chart-network mr-3 text-green-400"></i>QUANTUM STATE
                    </h3>
                    
                    <div class="space-y-6">
                        <div class="quantum-state p-4">
                            <div class="relative z-10">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-300">Superposition</span>
                                    <span id="superposition-value" class="text-green-400 font-bold">Active</span>
                                </div>
                                <div class="text-sm text-gray-400">
                                    <i class="fas fa-quote-left mr-1 opacity-50"></i>
                                    <span id="state-description">Dice are in quantum superposition until observed</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center p-4 rounded-xl bg-gray-900/60">
                                <div class="text-3xl font-bold text-cyan-300" id="total-rolls">0</div>
                                <div class="text-sm text-gray-400 mt-1">Total Rolls</div>
                            </div>
                            <div class="text-center p-4 rounded-xl bg-gray-900/60">
                                <div class="text-3xl font-bold text-purple-300" id="entangled-rolls">0</div>
                                <div class="text-sm text-gray-400 mt-1">Entangled Rolls</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Probability Distribution -->
                <div class="glow-border rounded-2xl p-6 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm">
                    <h3 class="orbitron-font text-xl font-bold mb-6 flex items-center">
                        <i class="fas fa-chart-bar mr-3 text-amber-400"></i>PROBABILITY DISTRIBUTION
                    </h3>
                    
                    <div class="space-y-4" id="distribution-container">
                        <div class="text-center py-6 text-gray-500">
                            <i class="fas fa-chart-line text-2xl mb-2"></i>
                            <p>Roll dice to see probability distribution</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quantum Insights -->
                <div class="glow-border rounded-2xl p-6 bg-gradient-to-br from-gray-900/60 to-gray-900/30 backdrop-blur-sm">
                    <h3 class="orbitron-font text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-lightbulb mr-3 text-yellow-400"></i>QUANTUM INSIGHTS
                    </h3>
                    
                    <div class="space-y-3">
                        <div class="text-sm text-gray-300">
                            <div class="font-medium text-cyan-300 mb-1">Observer Effect</div>
                            <p>The act of measurement collapses the wave function, determining the dice outcome.</p>
                        </div>
                        
                        <div class="text-sm text-gray-300">
                            <div class="font-medium text-purple-300 mb-1">Quantum Entanglement</div>
                            <p>When dice are entangled, measuring one affects the state of the others instantly.</p>
                        </div>
                        
                        <div class="text-sm text-gray-300">
                            <div class="font-medium text-green-300 mb-1">Superposition</div>
                            <p>Before measurement, dice exist in all possible states simultaneously.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="mt-12 pt-8 border-t border-gray-800 text-center text-gray-500 text-sm">
            <div class="flex flex-col items-center">
                <div class="flex items-center mb-2">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-r from-cyan-500 to-purple-600 flex items-center justify-center mr-2">
                        <i class="fas fa-atom text-xs"></i>
                    </div>
                    <span class="orbitron-font">QUANTUM DICE SIMULATOR</span>
                </div>
                <p>An interactive exploration of probability through quantum mechanics principles</p>
                <p class="mt-1">Not actual quantum physics â€” but a fascinating way to visualize probability!</p>
            </div>
        </footer>
    </div>

    <script>
        // Quantum Dice Roller - Redesigned UI
        document.addEventListener('DOMContentLoaded', function() {
            // Quantum State
            let quantumState = {
                diceCount: 1,
                isEntangled: false,
                entanglementLevel: 0,
                fluctuation: 50,
                totalRolls: 0,
                entangledRolls: 0,
                distribution: {},
                lastRoll: []
            };
            
            // DOM Elements
            const diceChamber = document.getElementById('dice-chamber');
            const initialState = document.getElementById('initial-state');
            const entanglementBeams = document.getElementById('entanglement-beams');
            const rollResults = document.getElementById('roll-results');
            const resultValues = document.getElementById('result-values');
            const resultSum = document.getElementById('result-sum');
            const quantumRollBtn = document.getElementById('quantum-roll-btn');
            const entangleBtn = document.getElementById('entangle-btn');
            const separateBtn = document.getElementById('separate-btn');
            const autoExperimentBtn = document.getElementById('auto-experiment-btn');
            const diceCountSelectors = document.querySelectorAll('.dice-count-selector');
            const diceCountDisplay = document.getElementById('dice-count-display');
            const entanglementBar = document.getElementById('entanglement-bar');
            const entanglementLevel = document.getElementById('entanglement-level');
            const entanglementDescription = document.getElementById('entanglement-description');
            const fluctuationSlider = document.getElementById('fluctuation-slider');
            const fluctuationLevel = document.getElementById('fluctuation-level');
            const chamberStatus = document.getElementById('chamber-status');
            const totalRollsEl = document.getElementById('total-rolls');
            const entangledRollsEl = document.getElementById('entangled-rolls');
            const superpositionValue = document.getElementById('superposition-value');
            const stateDescription = document.getElementById('state-description');
            const distributionContainer = document.getElementById('distribution-container');
            
            // Initialize particles
            initParticles();
            
            // Initialize dice
            initDiceChamber();
            updateDistributionDisplay();
            
            // Event Listeners
            quantumRollBtn.addEventListener('click', quantumRoll);
            entangleBtn.addEventListener('click', () => setEntanglement(true));
            separateBtn.addEventListener('click', () => setEntanglement(false));
            autoExperimentBtn.addEventListener('click', runQuantumExperiment);
            
            diceCountSelectors.forEach(btn => {
                btn.addEventListener('click', function() {
                    quantumState.diceCount = parseInt(this.dataset.count);
                    
                    diceCountSelectors.forEach(b => {
                        b.classList.remove('active', 'from-cyan-700', 'to-cyan-900');
                        b.classList.add('bg-gray-800');
                    });
                    
                    this.classList.add('active', 'from-cyan-700', 'to-cyan-900');
                    this.classList.remove('bg-gray-800');
                    
                    diceCountDisplay.textContent = quantumState.diceCount;
                    initDiceChamber();
                    updateDistributionDisplay();
                });
            });
            
            fluctuationSlider.addEventListener('input', function() {
                quantumState.fluctuation = parseInt(this.value);
                const levels = ['Minimal', 'Low', 'Medium', 'High', 'Extreme'];
                const levelIndex = Math.floor(quantumState.fluctuation / 20);
                fluctuationLevel.textContent = levels[levelIndex];
            });
            
            // Initialize entanglement
            setEntanglement(false);
            
            // Functions
            function initParticles() {
                const container = document.getElementById('particles-container');
                
                for (let i = 0; i < 30; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    
                    // Random size and position
                    const size = Math.random() * 4 + 1;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    
                    // Random animation delay and duration
                    particle.style.animationDelay = `${Math.random() * 20}s`;
                    particle.style.animationDuration = `${Math.random() * 10 + 15}s`;
                    
                    container.appendChild(particle);
                }
            }
            
            function initDiceChamber() {
                diceChamber.innerHTML = '';
                entanglementBeams.innerHTML = '';
                
                // Remove initial state message
                if (initialState) initialState.classList.add('hidden');
                
                // Create dice
                for (let i = 0; i < quantumState.diceCount; i++) {
                    const dice = document.createElement('div');
                    dice.className = 'quantum-dice';
                    dice.dataset.index = i;
                    
                    // Generate dice faces
                    const faces = [
                        `<div class="dice-face" style="transform: translateZ(60px); background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <div class="flex justify-center items-center w-full h-full">
                                <div class="pip"></div>
                            </div>
                        </div>`,
                        `<div class="dice-face" style="transform: rotateY(180deg) translateZ(60px); background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <div class="grid grid-cols-3 grid-rows-3 w-3/4 h-3/4">
                                <div class="pip col-start-3"></div>
                                <div class="pip col-start-2 row-start-2"></div>
                                <div class="pip col-start-1 row-start-3"></div>
                            </div>
                        </div>`,
                        `<div class="dice-face" style="transform: rotateY(90deg) translateZ(60px); background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <div class="grid grid-cols-3 grid-rows-3 w-3/4 h-3/4">
                                <div class="pip"></div>
                                <div class="pip col-start-2 row-start-2"></div>
                                <div class="pip col-start-3 row-start-3"></div>
                            </div>
                        </div>`,
                        `<div class="dice-face" style="transform: rotateY(-90deg) translateZ(60px); background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <div class="grid grid-cols-2 grid-rows-2 w-3/4 h-3/4 gap-6">
                                <div class="pip"></div>
                                <div class="pip"></div>
                                <div class="pip"></div>
                                <div class="pip"></div>
                            </div>
                        </div>`,
                        `<div class="dice-face" style="transform: rotateX(90deg) translateZ(60px); background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <div class="grid grid-cols-3 grid-rows-3 w-3/4 h-3/4">
                                <div class="pip"></div>
                                <div class="pip col-start-3"></div>
                                <div class="pip col-start-2 row-start-2"></div>
                                <div class="pip row-start-3"></div>
                                <div class="pip col-start-3 row-start-3"></div>
                            </div>
                        </div>`,
                        `<div class="dice-face" style="transform: rotateX(-90deg) translateZ(60px); background: linear-gradient(135deg, #1a1a2e, #16213e);">
                            <div class="grid grid-cols-3 grid-rows-3 w-3/4 h-3/4">
                                <div class="pip"></div>
                                <div class="pip col-start-2"></div>
                                <div class="pip col-start-3"></div>
                                <div class="pip row-start-2"></div>
                                <div class="pip col-start-2 row-start-2"></div>
                                <div class="pip col-start-3 row-start-2"></div>
                                <div class="pip row-start-3"></div>
                                <div class="pip col-start-2 row-start-3"></div>
                                <div class="pip col-start-3 row-start-3"></div>
                            </div>
                        </div>`
                    ];
                    
                    dice.innerHTML = faces.join('');
                    
                    // Add quantum glow if entangled
                    if (quantumState.isEntangled) {
                        dice.style.boxShadow = '0 0 30px rgba(180, 100, 255, 0.5)';
                    }
                    
                    // Random initial rotation
                    const rotationX = Math.random() * 360;
                    const rotationY = Math.random() * 360;
                    dice.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
                    
                    diceChamber.appendChild(dice);
                }
                
                // Update entanglement visuals
                updateEntanglementVisuals();
            }
            
            function quantumRoll() {
                quantumState.totalRolls++;
                totalRollsEl.textContent = quantumState.totalRolls;
                
                // Update chamber status
                chamberStatus.textContent = "Collapsing wave function...";
                chamberStatus.classList.add('text-purple-400');
                
                // Get dice elements
                const diceElements = document.querySelectorAll('.quantum-dice');
                const results = [];
                
                // Generate results based on entanglement
                if (quantumState.isEntangled && quantumState.diceCount > 1) {
                    quantumState.entangledRolls++;
                    entangledRollsEl.textContent = quantumState.entangledRolls;
                    
                    // Create correlated results for entangled dice
                    const baseValue = Math.floor(Math.random() * 6) + 1;
                    
                    for (let i = 0; i < quantumState.diceCount; i++) {
                        let result;
                        
                        if (i === 0) {
                            result = baseValue;
                        } else {
                            // Apply entanglement correlation
                            const correlationStrength = quantumState.entanglementLevel / 100;
                            
                            if (Math.random() < correlationStrength) {
                                // Strong correlation: often sum to 7 or have inverse relationship
                                result = 7 - baseValue;
                                if (result < 1) result = 1;
                                if (result > 6) result = 6;
                                
                                // Add some fluctuation
                                if (Math.random() < quantumState.fluctuation / 200) {
                                    result = Math.floor(Math.random() * 6) + 1;
                                }
                            } else {
                                // Some randomness
                                result = Math.floor(Math.random() * 6) + 1;
                            }
                        }
                        
                        results.push(result);
                    }
                } else {
                    // Independent dice
                    for (let i = 0; i < quantumState.diceCount; i++) {
                        results.push(Math.floor(Math.random() * 6) + 1);
                    }
                }
                
                quantumState.lastRoll = results;
                
                // Animate dice
                diceElements.forEach((dice, index) => {
                    // Add rolling animation
                    dice.classList.add('rolling');
                    
                    // Determine final rotation based on result
                    const result = results[index];
                    const rotations = {
                        1: 'rotateX(0deg) rotateY(0deg)',
                        2: 'rotateX(0deg) rotateY(180deg)',
                        3: 'rotateX(0deg) rotateY(90deg)',
                        4: 'rotateX(0deg) rotateY(-90deg)',
                        5: 'rotateX(-90deg) rotateY(0deg)',
                        6: 'rotateX(90deg) rotateY(0deg)'
                    };
                    
                    // Apply final rotation after animation
                    setTimeout(() => {
                        dice.classList.remove('rolling');
                        dice.style.transform = rotations[result];
                        
                        // Add collapse effect
                        dice.classList.add('collapse');
                        setTimeout(() => dice.classList.remove('collapse'), 500);
                    }, 1000);
                });
                
                // Update distribution
                const sum = results.reduce((a, b) => a + b, 0);
                quantumState.distribution[sum] = (quantumState.distribution[sum] || 0) + 1;
                
                // Update UI after animation
                setTimeout(() => {
                    updateRollResults(results);
                    updateDistributionDisplay();
                    updateQuantumStateDisplay();
                    
                    chamberStatus.textContent = "Wave function collapsed";
                    chamberStatus.classList.remove('text-purple-400');
                    chamberStatus.classList.add('text-green-400');
                }, 1100);
            }
            
            function setEntanglement(entangled) {
                quantumState.isEntangled = entangled;
                
                if (entangled) {
                    // Gradually increase entanglement level
                    let level = 0;
                    const interval = setInterval(() => {
                        level += 5;
                        quantumState.entanglementLevel = level;
                        entanglementBar.style.width = `${level}%`;
                        entanglementLevel.textContent = `${level}%`;
                        
                        if (level >= 80) {
                            clearInterval(interval);
                            quantumState.entanglementLevel = 80;
                            entanglementBar.style.width = '80%';
                            entanglementLevel.textContent = '80%';
                        }
                    }, 50);
                    
                    entanglementDescription.textContent = "Dice are quantum entangled. Their states are now correlated across any distance.";
                    stateDescription.textContent = "Quantum entanglement active. Measuring one die instantly affects the others.";
                    superpositionValue.textContent = "Entangled";
                    superpositionValue.classList.remove('text-green-400');
                    superpositionValue.classList.add('text-purple-400');
                    
                    // Update dice appearance
                    document.querySelectorAll('.quantum-dice').forEach(dice => {
                        dice.style.boxShadow = '0 0 30px rgba(180, 100, 255, 0.5)';
                    });
                } else {
                    // Gradually decrease entanglement level
                    let level = quantumState.entanglementLevel;
                    const interval = setInterval(() => {
                        level -= 5;
                        quantumState.entanglementLevel = level;
                        entanglementBar.style.width = `${level}%`;
                        entanglementLevel.textContent = `${level}%`;
                        
                        if (level <= 0) {
                            clearInterval(interval);
                            quantumState.entanglementLevel = 0;
                            entanglementBar.style.width = '0%';
                            entanglementLevel.textContent = '0%';
                        }
                    }, 50);
                    
                    entanglementDescription.textContent = "Dice are independent. Each follows classical probability distribution.";
                    stateDescription.textContent = "Dice are in quantum superposition until observed.";
                    superpositionValue.textContent = "Active";
                    superpositionValue.classList.remove('text-purple-400');
                    superpositionValue.classList.add('text-green-400');
                    
                    // Update dice appearance
                    document.querySelectorAll('.quantum-dice').forEach(dice => {
                        dice.style.boxShadow = 'none';
                    });
                }
                
                updateEntanglementVisuals();
            }
            
            function updateEntanglementVisuals() {
                entanglementBeams.innerHTML = '';
                
                if (quantumState.isEntangled && quantumState.diceCount > 1) {
                    const diceElements = document.querySelectorAll('.quantum-dice');
                    
                    // Create beams between dice
                    for (let i = 0; i < diceElements.length - 1; i++) {
                        for (let j = i + 1; j < diceElements.length; j++) {
                            const beam = document.createElement('div');
                            beam.className = 'entanglement-beam';
                            
                            // Position beam between dice
                            const rect1 = diceElements[i].getBoundingClientRect();
                            const rect2 = diceElements[j].getBoundingClientRect();
                            const chamberRect = diceChamber.getBoundingClientRect();
                            
                            const x1 = rect1.left + rect1.width/2 - chamberRect.left;
                            const y1 = rect1.top + rect1.height/2 - chamberRect.top;
                            const x2 = rect2.left + rect2.width/2 - chamberRect.left;
                            const y2 = rect2.top + rect2.height/2 - chamberRect.top;
                            
                            const distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
                            
                            beam.style.width = `${distance}px`;
                            beam.style.left = `${x1}px`;
                            beam.style.top = `${y1}px`;
                            beam.style.transform = `rotate(${angle}deg)`;
                            beam.style.transformOrigin = '0 0';
                            
                            entanglementBeams.appendChild(beam);
                        }
                    }
                }
            }
            
            function updateRollResults(results) {
                rollResults.classList.remove('hidden');
                
                // Clear previous results
                resultValues.innerHTML = '';
                
                // Display individual dice results
                results.forEach((value, index) => {
                    const resultEl = document.createElement('div');
                    resultEl.className = 'flex flex-col items-center';
                    
                    const colorClass = quantumState.isEntangled ? 'bg-gradient-to-br from-purple-900/50 to-purple-700/50' : 'bg-gradient-to-br from-cyan-900/50 to-cyan-700/50';
                    
                    resultEl.innerHTML = `
                        <div class="w-16 h-16 rounded-xl ${colorClass} border border-gray-700 flex items-center justify-center mb-2">
                            <span class="text-3xl font-bold">${value}</span>
                        </div>
                        <div class="text-xs text-gray-400">Dice ${index + 1}</div>
                    `;
                    
                    resultValues.appendChild(resultEl);
                });
                
                // Calculate and display sum
                const sum = results.reduce((a, b) => a + b, 0);
                resultSum.textContent = sum;
            }
            
            function updateDistributionDisplay() {
                if (Object.keys(quantumState.distribution).length === 0) {
                    distributionContainer.innerHTML = `
                        <div class="text-center py-6 text-gray-500">
                            <i class="fas fa-chart-line text-2xl mb-2"></i>
                            <p>Roll dice to see probability distribution</p>
                        </div>
                    `;
                    return;
                }
                
                const total = Object.values(quantumState.distribution).reduce((a, b) => a + b, 0);
                const maxValue = Math.max(...Object.values(quantumState.distribution));
                
                let distributionHTML = '';
                const minSum = quantumState.diceCount;
                const maxSum = quantumState.diceCount * 6;
                
                for (let sum = minSum; sum <= maxSum; sum++) {
                    const count = quantumState.distribution[sum] || 0;
                    const percentage = total > 0 ? ((count / total) * 100).toFixed(1) : 0;
                    const barWidth = total > 0 ? (count / maxValue * 100) : 0;
                    
                    distributionHTML += `
                        <div class="flex items-center space-x-3">
                            <div class="w-8 text-sm font-medium">${sum}</div>
                            <div class="flex-1">
                                <div class="stat-bar">
                                    <div class="stat-fill bg-gradient-to-r from-cyan-500 to-purple-500" style="width: ${barWidth}%"></div>
                                </div>
                            </div>
                            <div class="w-12 text-right text-sm font-medium">${percentage}%</div>
                        </div>
                    `;
                }
                
                distributionContainer.innerHTML = distributionHTML;
            }
            
            function updateQuantumStateDisplay() {
                // Update state description based on recent rolls
                const recentPatterns = getRecentPatterns();
                
                if (quantumState.isEntangled) {
                    if (recentPatterns.hasCorrelation) {
                        stateDescription.textContent = "Strong quantum correlation observed between dice.";
                    } else {
                        stateDescription.textContent = "Quantum entanglement active but correlation not yet observed.";
                    }
                } else {
                    if (recentPatterns.isRandom) {
                        stateDescription.textContent = "Dice exhibit classical random distribution.";
                    } else {
                        stateDescription.textContent = "Statistical anomalies detected in recent rolls.";
                    }
                }
            }
            
            function getRecentPatterns() {
                // Analyze last few rolls for patterns
                // This is a simplified version
                return {
                    hasCorrelation: Math.random() > 0.5,
                    isRandom: Math.random() > 0.3
                };
            }
            
            function runQuantumExperiment() {
                autoExperimentBtn.disabled = true;
                autoExperimentBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Running Experiment...';
                
                let rollsCompleted = 0;
                const totalRolls = 100;
                
                const rollInterval = setInterval(() => {
                    quantumRoll();
                    rollsCompleted++;
                    
                    if (rollsCompleted >= totalRolls) {
                        clearInterval(rollInterval);
                        autoExperimentBtn.disabled = false;
                        autoExperimentBtn.innerHTML = '<i class="fas fa-flask mr-2"></i>Run Quantum Experiment (100 rolls)';
                        
                        // Update chamber status
                        chamberStatus.textContent = `Experiment complete: ${totalRolls} rolls analyzed`;
                        chamberStatus.classList.add('text-amber-400');
                    }
                }, 100);
            }
            
            // Initial demo roll
            setTimeout(() => {
                if (quantumState.totalRolls === 0) {
                    quantumRoll();
                    setTimeout(() => {
                        setEntanglement(true);
                        setTimeout(() => quantumRoll(), 1000);
                    }, 1500);
                }
            }, 800);
        });
    </script>
</body>
</html>